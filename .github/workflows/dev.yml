name: Dev Build

on:
  workflow_dispatch:
  push:
    branches: # branches to run builds on
      - 'main'
      - 'master'
    paths-ignore:   # do not run if these are the only files that have changed
      - README.md
      - .gitignore
      - catone_docker.sh
      - git-hooks
      - gradlew
      - gradlew.bat
      - docs/**
      - docker/**
      - .githooks/**
      - tools/**

jobs:
  development-build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          fetch-depth: 0 # include tags for semantic-version

      - name: Check JS
        run: |
          npm ci
          npm run build

      - name: Set up our JDK environment
        uses: actions/setup-java@v1.4.3
        with:
          java-version: 11

      - name: Check Java
        run: |
          cd android && ./gradlew build
